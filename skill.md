# skill.md — Project Knowledge

## What This Project Is

**libs-genclaude** is a curated gallery of 35 web animation demos across 5 categories: scroll animations, 3D/WebGL, View Transitions, CSS/Canvas effects, and full page builds. Each demo is a self-contained example of a specific animation technique, designed to serve as both a visual showcase and a code reference. All code was generated by Claude Opus 4.6.

## Technologies and Their Roles

| Technology | What It Does Here |
|-----------|-------------------|
| **GSAP (GreenSock)** | Powers all scroll-driven animations. ScrollTrigger pins sections and scrubs timelines. SplitText breaks text into animatable units. ScrambleText creates typewriter/glitch effects. FLIP handles layout transition animations. |
| **Lenis** | Provides smooth momentum-based scrolling. Integrated with GSAP's ticker for frame-perfect sync. |
| **Three.js** | Renders all 3D/WebGL demos. Used for particle systems, shader materials, PBR rendering, InstancedMesh, and post-processing (bloom). |
| **View Transitions API** | Native browser API for animating between DOM states. Used for page routing transitions, card-to-detail morphs, theme switching with clip-path wipes, and image gallery crossfades. |
| **Canvas 2D** | Used for bokeh particle effects, grain overlays, bezier blob animation, neural network visualizations, waveform visualizers, and particle physics. |
| **CSS** | Keyframe animations for card entrances, border-radius morphing, mask-image spotlight effects, scanline overlays, CRT effects, and retro pixel aesthetics. |
| **Vite** | Dev server with HMR for complex demos. Multi-page build config auto-discovers bundled demos. |
| **bun** | Package manager (use `bun install`, `bun run dev`, not npm). |

## Two Types of Demos

### Vite-Bundled (25 demos)
- Contain a `.vite-demo` marker file in their directory
- Use ES module `import` statements for npm packages
- Get Vite's HMR, tree-shaking, and module resolution
- Examples: scroll demos (01–06), 3D demos (07–10, 21–22), all pages demos (23–35)

### Static (10 demos)
- No `.vite-demo` marker — just plain HTML/CSS/JS
- Served as-is by Vite's dev server (no bundling needed)
- Use native browser APIs or inline implementations
- Examples: View Transitions demos (11–14), Canvas 2D effects (15–20)

## Categories

| Category | IDs | Count |
|----------|-----|-------|
| `scroll` | 01–06 | 6 |
| `3d` | 07–10, 21–22 | 6 |
| `transitions` | 11–14 | 4 |
| `css-canvas` | 15–20 | 6 |
| `pages` | 23–35 | 13 |

## How the Gallery Hub Works

`index.html` is a single-page app with:
1. **Ambient canvas background** — Floating radial gradient particles with screen blend mode
2. **Registry loading** — Fetches `demos/registry.json` at startup (35 demos)
3. **Dynamic card rendering** — Creates `<a>` cards for each "ready" demo
4. **Category filtering** — Buttons filter by `scroll`, `3d`, `transitions`, `css-canvas`, `pages`
5. **Staggered entrance** — Cards fade in with position-based delay
6. **Claude badge** — Floating bottom-right badge with cycling AI attribution phrases
7. **Reduced motion** — Canvas hides, animations disable when `prefers-reduced-motion` is active

## Shared Utility Modules

### `shared/a11y.js`
- `prefersReducedMotion()` — Returns boolean, reactive to OS setting
- `setReducedMotion(bool)` — Programmatic toggle, fires CustomEvent
- `createMotionToggle(container)` — Renders toggle button widget

### `shared/demo-shell.js`
- `initDemoShell({ title, category, tech })` — Injects into any demo:
  - Back link to gallery (top-left, ESC key)
  - Motion toggle button (top-right)
  - Info bar with title + tags (bottom strip)

### `shared/colors.js`
- `palette` object — Canonical dark-theme color tokens

### `shared/motion-tokens.js`
- `durations` — 5 timing presets (fast→epic) in seconds
- `easings` — 6 GSAP ease strings
- `stagger` — 5 stagger config objects for `gsap.to()`

## Accessibility Approach

1. Every demo imports `prefersReducedMotion` from `shared/a11y.js`
2. On load, animations are disabled if the OS preference is set
3. The demo shell injects a toggle button for manual control
4. The toggle fires a `motion-preference` CustomEvent that demos listen for
5. `.reduced-motion` CSS class is toggled on `<html>` for CSS-based fallbacks
6. Decorative elements use `aria-hidden="true"`
7. Text maintains WCAG AAA contrast (17.4:1)

## Key Code Patterns

### GSAP + Lenis Smooth Scroll
```js
import gsap from 'gsap';
import ScrollTrigger from 'gsap/ScrollTrigger';
import Lenis from 'lenis';
gsap.registerPlugin(ScrollTrigger);
const lenis = new Lenis({ lerp: 0.1, smoothWheel: true });
lenis.on('scroll', ScrollTrigger.update);
gsap.ticker.add((time) => lenis.raf(time * 1000));
gsap.ticker.lagSmoothing(0);
```

### Three.js Scene with Bloom
```js
import * as THREE from 'three';
import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

const composer = new EffectComposer(renderer);
composer.addPass(new RenderPass(scene, camera));
composer.addPass(new UnrealBloomPass(resolution, strength, radius, threshold));
```

### View Transitions Fallback
```js
const supportsVT = typeof document.startViewTransition === 'function';
if (supportsVT && !prefersReducedMotion()) {
  document.startViewTransition(() => updateDOM());
} else {
  updateDOM();
}
```

### Demo Shell Initialization
```js
import { initDemoShell } from '/shared/demo-shell.js';
import { prefersReducedMotion } from '/shared/a11y.js';
initDemoShell({ title: 'Demo Title', category: 'css-canvas', tech: ['tag1', 'tag2'] });

let reduced = prefersReducedMotion();
if (reduced) document.documentElement.classList.add('reduced-motion');

window.addEventListener('motion-preference', (e) => {
  reduced = e.detail.reduced;
  // Start or stop animations based on reduced state
});
```

### GSAP FLIP for Layout Transitions
```js
import gsap from 'gsap';
import Flip from 'gsap/Flip';
gsap.registerPlugin(Flip);

const state = Flip.getState(elements);
// ...change layout...
Flip.from(state, { duration: 0.6, ease: 'power2.inOut', stagger: 0.05 });
```

### ScrambleText Effect
```js
import gsap from 'gsap';
import ScrambleTextPlugin from 'gsap/ScrambleTextPlugin';
gsap.registerPlugin(ScrambleTextPlugin);

gsap.to(element, {
  duration: 1.5,
  scrambleText: { text: 'Final Text', chars: '01', speed: 0.4 }
});
```
